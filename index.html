<!DOCTYPE html>
<html>

<link rel="stylesheet" href="/apps/bootstrap.css">
<script src="/apps/external.min.js"></script>

<head>
  <meta charset="utf-8">
  <meta name = "viewport"
        content = "width = device-width,
                   initial-scale = 1.0,
                   maximum-scale = 1.0,
                   user-scalable = no">
</head>

<script>
class Router extends React.Component {
    constructor(props) {
        super(props)

        console.log('Router.constructor()')
    }

    componentDidMount() {
        window.onhashchange = () => this.setState({})
    }

    render() {
        const parser = document.createElement('a')
        parser.href = window.location

        const component = this.props.routes[parser.hash] || this.props.default

        const b = ReactBootstrap
        const e = React.createElement

        function ConnectedComponent(props) {
            return e(b.Grid, null,
                        e(b.Row, null,
                            e(b.Col, {sm:12},
                                e(component, props))))
        }

        const store = this.props.store

        const factory = React.createFactory(
            ReactRedux.connect(
                (state) => { return {state: state}},
                Actions)(ConnectedComponent))

        return React.createElement(ReactRedux.Provider, {store: store},
            factory(null))
    }
}
</script>

<script src="/apps/learn.js"></script>

<body>
    <script>
        ReactDOM.render(app(), document.body)
    </script>
</body>
</html>

<!DOCTYPE html>
<html>
<link rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<link rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.2/lodash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-bootstrap/0.30.7/react-bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.1/react.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.1/react-dom.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/redux/3.6.0/redux.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-redux/4.4.6/react-redux.min.js"></script>

<head>
  <meta charset="utf-8">
  <meta name = "viewport"
        content = "width = device-width,
                   initial-scale = 1.0,
                   maximum-scale = 1.0,
                   user-scalable = no">
</head>

<script>
function InputBox(props) {
    return React.DOM.input({
        style: {width: "100%"},
        onChange: e => props.onChange(e.target.value)})
}

function TextDisplay(props) {
    return React.DOM.pre({

    }, props.text)
}

class Container extends React.Component {
    constructor(props) {
        super(props);
    }


    onEvent(e) {
        this.props.onTextChange(e.target.value)
    }

    render() {
        const {div, pre} = React.DOM
        const input = React.createFactory(InputBox)
        const display = React.createFactory(TextDisplay)

        return div({className: 'container'},
                    div({className: 'row'},
                        div({className: 'col-sm-12'},
                            input({onChange: this.props.onTextChange}))),
                    div({className: 'row'},
                        div({className: 'col-sm-12'},
                            display({text: this.props.text}))))
    }
}

Container.APP = () => {

    propsMap = (state) => { return {
        text: state.text
    }}


    actionsMap = (dispatch) => { return {
        onTextChange: Redux.bindActionCreators(updateText, dispatch)
    }}

    return React.createFactory(
        ReactRedux.connect(propsMap, actionsMap)(Container))
}
</script>

<script>
function reducer(state, action) {
    switch(action.type) {
        case 'UPDATE_TEXT':
            return {text: action.text}
            break
    }
    return state
}

function updateText(text) {
    return {
        type: 'UPDATE_TEXT',
        text
    }
}
</script>

<body>
    <script>
        const store = Redux.createStore(reducer, {
            text: 'initial text'
        })

        const Provider = React.createFactory(ReactRedux.Provider)
        const APP = Container.APP()

        ReactDOM.render(
            Provider({store: store},
                APP({})),
            document.body)
    </script>
</body>
</html>
